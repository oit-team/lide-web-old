(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b9422"],{"31d2":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"pageCommonStyle",attrs:{id:"addRole"}},[r("el-page-header",{attrs:{content:e.title},on:{back:e.goBack}}),r("el-divider"),r("el-form",{ref:"ruleForm",staticStyle:{"margin-top":"20px"},attrs:{rules:e.rules,model:e.ruleForm,"label-width":"90px","label-position":"left"}},[r("div",{staticStyle:{width:"50%",display:"inline-block",float:"left","border-right":"1px solid #DCDFE6","padding-right":"20px"}},[r("el-form-item",{attrs:{label:"用户姓名"}},[r("el-input",{staticStyle:{width:"100%"},attrs:{disabled:!0,placeholder:"请输入用户姓名"},model:{value:e.ruleForm.userName,callback:function(t){e.$set(e.ruleForm,"userName",t)},expression:"ruleForm.userName"}})],1),e.editFlag?r("el-form-item",{attrs:{label:"用户状态",prop:"status"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",disabled:!0,placeholder:"请选择用户状态"},model:{value:e.ruleForm.status,callback:function(t){e.$set(e.ruleForm,"status",t)},expression:"ruleForm.status"}},e._l(e.statusList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.label,value:e.key}})})),1)],1):e._e(),r("el-form-item",{attrs:{label:"推荐码"}},[r("el-input",{staticStyle:{width:"100%"},attrs:{disabled:!0},model:{value:e.ruleForm.invitationCode,callback:function(t){e.$set(e.ruleForm,"invitationCode",t)},expression:"ruleForm.invitationCode"}})],1),r("el-form-item",{attrs:{label:"推荐人"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",placeholder:"请选择推荐人"},model:{value:e.ruleForm.recommender,callback:function(t){e.$set(e.ruleForm,"recommender",t)},expression:"ruleForm.recommender"}},e._l(e.userList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.nickName,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"宝玉",prop:"bys"}},[r("el-input",{staticStyle:{width:"100%"},attrs:{type:"number",placeholder:"请输入宝玉",maxlength:"10"},on:{input:function(t){e.ruleForm.bys=e.ruleForm.bys.substring(0,10)}},model:{value:e.ruleForm.bys,callback:function(t){e.$set(e.ruleForm,"bys",t)},expression:"ruleForm.bys"}})],1),r("el-form-item",{attrs:{label:"积分",prop:"integral"}},[r("el-input",{staticStyle:{width:"100%"},attrs:{type:"number",placeholder:"请输入积分",maxlength:"10"},on:{input:function(t){e.ruleForm.integral=e.ruleForm.integral.substring(0,10)}},model:{value:e.ruleForm.integral,callback:function(t){e.$set(e.ruleForm,"integral",t)},expression:"ruleForm.integral"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"passWord"}},[r("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入新密码","show-password":""},model:{value:e.ruleForm.passWord,callback:function(t){e.$set(e.ruleForm,"passWord",t)},expression:"ruleForm.passWord"}})],1)],1),r("div",{staticStyle:{width:"50%",display:"inline-block",float:"left","padding-left":"20px"}},[r("el-form-item",{attrs:{label:"真实姓名"}},[r("el-input",{staticStyle:{width:"100%"},attrs:{disabled:!0},model:{value:e.ruleForm.nickName,callback:function(t){e.$set(e.ruleForm,"nickName",t)},expression:"ruleForm.nickName"}})],1),r("el-form-item",{attrs:{label:"出生日期"}},[r("el-input",{staticStyle:{width:"100%"},attrs:{disabled:!0},model:{value:e.ruleForm.birthDate,callback:function(t){e.$set(e.ruleForm,"birthDate",t)},expression:"ruleForm.birthDate"}})],1),r("el-form-item",{attrs:{label:"性别"}},[0==e.ruleForm.sex?r("el-input",{staticStyle:{width:"100%"},attrs:{disabled:!0,value:"男"}}):1==e.ruleForm.sex?r("el-input",{staticStyle:{width:"100%"},attrs:{disabled:!0,value:"女"}}):-1==e.ruleForm.sex?r("el-input",{staticStyle:{width:"100%"},attrs:{disabled:!0,value:"暂无"}}):r("el-input",{staticStyle:{width:"100%"},attrs:{disabled:!0},model:{value:e.ruleForm.sex,callback:function(t){e.$set(e.ruleForm,"sex",t)},expression:"ruleForm.sex"}})],1),r("el-form-item",{attrs:{label:"电话号码"}},[r("el-input",{staticStyle:{width:"100%"},attrs:{disabled:!0},model:{value:e.ruleForm.telephone,callback:function(t){e.$set(e.ruleForm,"telephone",t)},expression:"ruleForm.telephone"}})],1),r("el-form-item",{attrs:{label:"地址"}},[r("el-input",{staticStyle:{width:"100%"},attrs:{disabled:!0},model:{value:e.ruleForm.address,callback:function(t){e.$set(e.ruleForm,"address",t)},expression:"ruleForm.address"}})],1),r("el-form-item",{attrs:{label:"用户头像"}},[e.ruleForm.headPortrait?r("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.ruleForm.headPortrait}}):r("span",{staticStyle:{color:"#BFBFBF"}},[e._v("暂无头像")])],1)],1),r("div",{staticStyle:{clear:"both","text-align":"center"}},[r("el-button",{attrs:{size:"small",icon:"el-icon-check",type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("保存")])],1)])],1)},a=[],l=r("210a"),i={name:"addUser",props:{},data(){return{userList:"",passWord:"",editFlag:!1,statusList:[{key:0,label:"启用"},{key:1,label:"停用"}],title:"",UserId:"",ruleForm:{userName:"",bys:"",integral:"",recommender:""},rules:{userName:[{required:!0,message:"请输入用户名",trigger:"blur"}],bys:[{required:!0,message:"请输入宝玉",trigger:"blur"}],integral:[{required:!0,message:"请输入积分",trigger:"blur"}],passWord:[{required:!1,message:"请输入密码",trigger:"blur"},{min:6,message:"最少输入6位数字/字母",trigger:"blur"},{max:20,message:"最多输入20位数字/字母",trigger:"blur"}]}}},created(){this.getUserList(),this.$route.query.item?(this.title="编辑用户",this.editFlag=!0,this.getUserInfo(this.$route.query.item)):this.title="新增用户"},mounted(){},activated(){},watch:{},methods:{isUnique(){return!1},goBack(){this.$router.go(-1)},getUserInfo(e){const t={userId:e.id},r=this,s=r.GLOBAL.paramJson(t);r.$axios.post(r.Api.getUserById,s).then(e=>{0===e.data.head.status?("0"==e.data.body.userInfo.recommender&&(e.data.body.userInfo.recommender=e.data.body.userInfo.recommenderName),r.ruleForm=e.data.body.userInfo):r.$message({message:e.data.head.msg,type:"warning"})}).catch(e=>{console.log(e)})},getUserList(){const e={pageNum:1,pageSize:9999},t=this,r=this.GLOBAL.paramJson(e);this.$axios.post(this.Api.getUsers,r).then(e=>{0==e.data.head.status?t.userList=e.data.body.usersList:t.$message({message:e.data.head.msg,type:"warning"})})},submitForm(e){const t=this;t.$refs[e].validate(e=>{if(e){let e=this.ruleForm.recommender==this.ruleForm.recommenderName?"0":this.ruleForm.recommender,r={bys:this.ruleForm.bys,integral:this.ruleForm.integral,recommender:e},s="";if(t.editFlag){t.ruleForm.passWord&&(s=l["a"].encrypt(t.ruleForm.passWord),r.password=s),r.id=t.ruleForm.id;const e=t.GLOBAL.paramJson(r);t.$axios.post(t.Api.updateUserById,e).then(e=>{0===e.data.head.status?(t.$message({message:"编辑用户成功",type:"success"}),t.$bus.$emit("detailShow",t.ruleForm),t.$router.back()):t.$message({message:e.data.head.msg,type:"warning"})}).catch(e=>{console.log(e)})}else{const e=t.GLOBAL.paramJson(r);t.$axios.post(t.Api.insertUser,e).then(e=>{0===e.data.head.status?(t.$message({message:"新增用户成功",type:"success"}),t.$bus.$emit("detailShow",t.ruleForm),t.$router.back()):t.$message({message:e.data.head.msg,type:"warning"})}).catch(e=>{console.log(e)})}}})},resetForm(e){this.$refs[e].resetFields()}}},o=i,m=r("b709"),u=Object(m["a"])(o,s,a,!1,null,"4102e1e5",null);t["default"]=u.exports}}]);