(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c1788"],{"45d5":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"flex h-full"},[e("aside",{staticClass:"w-1/5 min-w-200px max-w-300px pr-2 flex flex-col"},[e("vc-item-group",{staticClass:"flex w-full",model:{value:t.form.status,callback:function(a){t.$set(t.form,"status",a)},expression:"form.status"}},[e("vc-item",{staticClass:"flex-1",attrs:{tag:!1,value:0},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.active,l=a.toggle;return[e("el-button",{attrs:{type:s?"primary":""},on:{click:l}},[t._v("未使用")])]}}])}),e("vc-item",{staticClass:"flex-1",attrs:{tag:!1,value:1},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.active,l=a.toggle;return[e("el-button",{attrs:{type:s?"primary":""},on:{click:l}},[t._v("已使用")])]}}])})],1),e("div",[e("el-input",{staticClass:"mt-2",attrs:{placeholder:"关键字过滤",clearable:""},model:{value:t.lazyValue,callback:function(a){t.lazyValue=a},expression:"lazyValue"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search",circle:""},on:{click:function(a){return t.queryCustom()}},slot:"append"})],1)],1),e("div",{staticClass:"flex-1 overflow-auto p-2 my-2 border border-gray-200 rounded"},[e("vc-item-group",{staticClass:"mb-2",attrs:{tag:"ol",mandatory:"","active-class":"!bg-gray-200"},model:{value:t.userId,callback:function(a){t.userId=a},expression:"userId"}},[e("vc-item",{staticClass:"text-lg p-2 rounded cursor-pointer hover:bg-gray-100",attrs:{tag:"li",value:0}},[t._v(" 全部"+t._s(t.allStateCount?"（"+t.allStateCount+"）":"")+" ")]),t._l(t.customList,(function(a){return e("vc-item",{key:a.userId,staticClass:"text-lg p-2 rounded cursor-pointer hover:bg-gray-100",attrs:{tag:"li",value:a.userId}},[t._v(" "+t._s(a.userName)+" "),a.count?e("span",[t._v(" （"),e("span",{staticClass:"text-red-500"},[t._v(t._s(a.count))]),t._v("） ")]):t._e()])}))],2),e("vc-load-more",{ref:"loadMore",attrs:{"first-load":""},on:{load:t.loadUserList}})],1)],1),e("main",{staticClass:"flex-1 flex flex-col"},[e("div",{staticClass:"border border-gray-200 rounded mb-2 p-3"},[e("div",{staticClass:"text-lg pb-1"},[t._v("历史统计：")]),e("div",{staticClass:"grid grid-cols-3 text-xl"},t._l(t.countInfo,(function(a,s){return e("div",{key:s},[t._v(t._s(a))])})),0)]),e("TablePage",t._b({ref:"table"},"TablePage",t.tablePageOption,!1))],1)])},l=[],o={name:"WithdrawList",data:()=>({customList:[],lazyValue:"",form:{userName:"",status:""},data:{},userId:null,allStateCount:0,countInfo:[],pageNum:1,drawer:!1}),computed:{tablePageOption(){return{promise:this.loadData,table:{data:this.data.resultList},pager:{total:this.data.count}}}},watch:{form:{deep:!0,handler(){this.pageNum=1,this.userId=0,this.$refs.loadMore.reset().load()}},userId(){this.$refs.table.loadData()}},methods:{loadUserList(t){this.$axios.post(this.Api.getTicketUser,this.GLOBAL.paramJson({pageNum:this.pageNum,pageSize:20,...this.form})).then(a=>{const e=a.data.body;this.allStateCount=e.totalNum,this.customList=1===this.pageNum?e.resultList:[...this.customList,...e.resultList],this.customList.length>=e.count?t.done():t.next(),this.pageNum++}).catch(t.fail)},async loadData(t){this.$axios.post(this.Api.getTicketUsedRecord,this.GLOBAL.paramJson({userId:this.userId,...t})).then(t=>{this.data=t.data.body,this.countInfo=this.data.stateNumList})},queryCustom(){this.form.userName=this.lazyValue}}},r=o,i=e("b709"),u=Object(i["a"])(r,s,l,!1,null,"5b34c910",null);a["default"]=u.exports}}]);