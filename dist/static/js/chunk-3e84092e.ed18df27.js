(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3e84092e"],{"01aa":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"pageCommonStyle",attrs:{id:"addRole"}},[r("el-page-header",{attrs:{content:e.title},on:{back:e.goBack}}),r("el-divider"),r("el-form",{ref:"ruleForm",staticStyle:{"margin-top":"20px"},attrs:{rules:e.rules,model:e.ruleForm,"label-width":"90px","label-position":"left"}},[r("el-form-item",{attrs:{label:"作者名称",prop:"authorName"}},[r("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"请输入作者名称"},model:{value:e.ruleForm.authorName,callback:function(t){e.$set(e.ruleForm,"authorName",t)},expression:"ruleForm.authorName"}})],1),r("el-form-item",{attrs:{label:"作者生日",prop:"birthDate"}},[r("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",format:"yyyy-MM-dd",placeholder:"请选择作者生日"},model:{value:e.ruleForm.birthDate,callback:function(t){e.$set(e.ruleForm,"birthDate",t)},expression:"ruleForm.birthDate"}})],1),r("el-form-item",{attrs:{label:"作者类型",prop:"category"}},[r("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"请输入作者类型"},model:{value:e.ruleForm.category,callback:function(t){e.$set(e.ruleForm,"category",t)},expression:"ruleForm.category"}})],1),r("el-form-item",{attrs:{label:"作者简介",prop:"briefIntro"}},[r("el-input",{staticStyle:{width:"60%"},attrs:{type:"textarea",rows:"6",placeholder:"请输入作者简介"},model:{value:e.ruleForm.briefIntro,callback:function(t){e.$set(e.ruleForm,"briefIntro",t)},expression:"ruleForm.briefIntro"}})],1),r("el-form-item",[r("el-button",{attrs:{size:"small",icon:"el-icon-check",type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("保存")]),e.editFlag?e._e():r("el-button",{attrs:{size:"small",icon:"el-icon-refresh"},on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)},o=[],s={name:"addAuthor",props:{},data(){return{editFlag:!1,id:"",title:"",UserId:"",ruleForm:{birthDate:"",briefIntro:null,authorName:"",category:"",id:""},rules:{authorName:[{required:!0,message:"请输入作者名称",trigger:"blur"}],birthDate:[{required:!0,message:"请选择作者生日",trigger:"blur"}],category:[{required:!0,message:"请输入作者类型",trigger:"blur"}]}}},created(){this.$route.query.item?(this.title="编辑作者",this.editFlag=!0,this.ruleForm.id=this.$route.query.item.id,this.loadManage(this.$route.query.item.id)):this.title="新增作者"},mounted(){},activated(){},watch:{},methods:{isUnique(){return!1},goBack(){this.$router.go(-1)},loadManage(e){const t=this,r={id:e},a=t.GLOBAL.paramJson(r);t.$axios.post(t.Api.getAuthorInfoById,a).then(e=>{0===e.data.head.status?(t.ruleForm.birthDate=e.data.body.authorInfo.birthDate,t.ruleForm.authorName=e.data.body.authorInfo.authorName,t.ruleForm.category=e.data.body.authorInfo.category,t.ruleForm.briefIntro=e.data.body.authorInfo.briefIntro):t.$message({message:e.data.head.msg,type:"warning"})}).catch(e=>{console.log(e)})},submitForm(e){const t=this;t.$refs[e].validate(e=>{if(e){const e={birthDate:t.ruleForm.birthDate,briefIntro:t.ruleForm.briefIntro,authorName:t.ruleForm.authorName,category:t.ruleForm.category};if(t.editFlag){e.id=t.ruleForm.id;const r=t.GLOBAL.paramJson(e);t.$axios.post(t.Api.updateAuthorById,r).then(r=>{0===r.data.head.status?(t.$message({message:"编辑作者成功",type:"success"}),e.briefIntro=null,t.$bus.$emit("detailShow",e),t.$router.back()):t.$message({message:r.data.head.msg,type:"warning"})}).catch(e=>{console.log(e)})}else{const r=t.GLOBAL.paramJson(e);t.$axios.post(t.Api.insertAuthorInfo,r).then(e=>{0===e.data.head.status?(t.$message({message:"新增作者成功",type:"success"}),t.$bus.$emit("detailShow",t.ruleForm),t.$router.back()):t.$message({message:e.data.head.msg,type:"warning"})}).catch(e=>{console.log(e)})}}})},resetForm(e){this.$refs[e].resetFields()}}},l=s,i=(r("46d9"),r("b709")),u=Object(i["a"])(l,a,o,!1,null,"0101d056",null);t["default"]=u.exports},"46d9":function(e,t,r){"use strict";r("8191")},8191:function(e,t,r){}}]);